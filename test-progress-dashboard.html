<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ä¹ è¿›åº¦æµ‹è¯• - TUST-ACM</title>
    <link rel="stylesheet" href="src/assets/libs/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="src/assets/css/learning-enhancements.css">
    <style>
        body {
            padding: 20px;
            background: #f7f8fc;
        }
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .test-button {
            margin: 10px 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">ğŸ§ª å­¦ä¹ è¿›åº¦åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>æµ‹è¯•è¯´æ˜</h3>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•å­¦ä¹ è¿›åº¦è¿½è¸ªåŠŸèƒ½ã€‚ä½ å¯ä»¥ï¼š</p>
            <ul>
                <li>ç”Ÿæˆæµ‹è¯•å­¦ä¹ è®¡åˆ’</li>
                <li>æŸ¥çœ‹è¿›åº¦ä»ªè¡¨æ¿</li>
                <li>æµ‹è¯•æ•°æ®ä¿å­˜å’Œè¯»å–</li>
                <li>æ¸…é™¤æµ‹è¯•æ•°æ®</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>å¿«é€Ÿæ“ä½œ</h3>
            <button class="btn btn-primary test-button" onclick="createTestPlan('algorithm')">
                ç”Ÿæˆç®—æ³•ç«èµ›è®¡åˆ’
            </button>
            <button class="btn btn-success test-button" onclick="createTestPlan('python')">
                ç”ŸæˆPythonè®¡åˆ’
            </button>
            <button class="btn btn-info test-button" onclick="createTestPlan('frontend')">
                ç”Ÿæˆå‰ç«¯è®¡åˆ’
            </button>
            <button class="btn btn-warning test-button" onclick="viewSavedPlans()">
                æŸ¥çœ‹å·²ä¿å­˜è®¡åˆ’
            </button>
            <button class="btn btn-danger test-button" onclick="clearAllData()">
                æ¸…é™¤æ‰€æœ‰æ•°æ®
            </button>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š è¿›åº¦ä»ªè¡¨æ¿é¢„è§ˆ</h3>
            <div id="dashboard-container"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ’¾ LocalStorage æ•°æ®</h3>
            <pre id="storage-data" style="background: #f7f8fc; padding: 15px; border-radius: 8px; max-height: 400px; overflow-y: auto;"></pre>
        </div>
    </div>

    <script src="src/assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="src/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="src/assets/js/study-planner.js"></script>
    <script src="src/assets/js/learning-tracker.js"></script>
    
    <script>
        // åˆ›å»ºæµ‹è¯•è®¡åˆ’
        function createTestPlan(pathId) {
            const planner = new StudyPlanner();
            const plan = planner.createPlan({
                pathId: pathId,
                weeklyHours: 15,
                targetDate: new Date(Date.now() + 180 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                level: 'intermediate',
                goal: 'interest',
                hasFoundation: false,
                preferredDays: ['1', '2', '3', '4', '5']
            });
            
            if (plan) {
                alert(`âœ… ${plan.pathName} å­¦ä¹ è®¡åˆ’å·²ç”Ÿæˆï¼`);
                refreshDashboard();
                displayStorageData();
            } else {
                alert('âŒ è®¡åˆ’ç”Ÿæˆå¤±è´¥');
            }
        }

        // æŸ¥çœ‹å·²ä¿å­˜çš„è®¡åˆ’
        function viewSavedPlans() {
            const saved = localStorage.getItem('tust-acm-study-plans');
            if (saved) {
                const plans = JSON.parse(saved);
                const planNames = Object.keys(plans).map(key => {
                    const pathNames = {
                        'algorithm': 'ç®—æ³•ç«èµ›',
                        'cpp': 'C/C++å¼€å‘',
                        'python': 'Pythonå¼€å‘',
                        'frontend': 'å‰ç«¯å¼€å‘',
                        'backend': 'åç«¯å¼€å‘',
                        'ai': 'AI/æœºå™¨å­¦ä¹ '
                    };
                    return pathNames[key] || key;
                }).join(', ');
                alert(`å·²ä¿å­˜çš„è®¡åˆ’ï¼š\n${planNames}`);
            } else {
                alert('è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•è®¡åˆ’');
            }
        }

        // æ¸…é™¤æ‰€æœ‰æ•°æ®
        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å­¦ä¹ æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem('tust-acm-study-plans');
                localStorage.removeItem('tust-acm-learning-progress');
                alert('âœ… æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
                refreshDashboard();
                displayStorageData();
            }
        }

        // åˆ·æ–°ä»ªè¡¨æ¿
        function refreshDashboard() {
            const container = document.getElementById('dashboard-container');
            container.innerHTML = '';
            
            // åˆ›å»ºè¿›åº¦å¡ç‰‡å®¹å™¨
            const row = document.createElement('div');
            row.className = 'row';
            row.id = 'progress-cards';
            container.appendChild(row);
            
            // åˆ›å»ºç»Ÿè®¡é¢æ¿
            const statsPanel = document.createElement('div');
            statsPanel.className = 'statistics-panel mt-4';
            statsPanel.innerHTML = `
                <div class="stat-item">
                    <span class="stat-icon">ğŸ¯</span>
                    <div class="stat-content">
                        <h4 id="total-achievements">0</h4>
                        <p>å·²è·æˆå°±</p>
                    </div>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">ğŸ“š</span>
                    <div class="stat-content">
                        <h4 id="active-paths">0</h4>
                        <p>å­¦ä¹ è·¯å¾„</p>
                    </div>
                </div>
                <div class="stat-item">
                    <span class="stat-icon">â±ï¸</span>
                    <div class="stat-content">
                        <h4 id="study-days">0</h4>
                        <p>å­¦ä¹ å¤©æ•°</p>
                    </div>
                </div>
            `;
            container.appendChild(statsPanel);
            
            // åˆå§‹åŒ–å­¦ä¹ è¿½è¸ªå™¨
            if (window.learningTracker) {
                window.learningTracker.updateStatistics();
            } else {
                window.learningTracker = new LearningTracker();
            }
        }

        // æ˜¾ç¤º LocalStorage æ•°æ®
        function displayStorageData() {
            const plans = localStorage.getItem('tust-acm-study-plans');
            const progress = localStorage.getItem('tust-acm-learning-progress');
            
            const data = {
                'study-plans': plans ? JSON.parse(plans) : null,
                'learning-progress': progress ? JSON.parse(progress) : null
            };
            
            document.getElementById('storage-data').textContent = JSON.stringify(data, null, 2);
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            refreshDashboard();
            displayStorageData();
        });
    </script>
</body>
</html>
