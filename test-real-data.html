<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®çœŸå®æ€§æµ‹è¯• - TUST-ACM</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f7f8fc;
        }
        h1 {
            color: #32325d;
            text-align: center;
        }
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .test-section h2 {
            color: #5e72e4;
            margin-bottom: 20px;
        }
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-success {
            background: #2dce89;
            color: white;
        }
        .btn-danger {
            background: #f5365c;
            color: white;
        }
        .btn-info {
            background: #11cdef;
            color: white;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .data-display {
            background: #f7f8fc;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            margin-left: 10px;
        }
        .status.real {
            background: #d4edda;
            color: #155724;
        }
        .status.fake {
            background: #f8d7da;
            color: #721c24;
        }
        .status.empty {
            background: #fff3cd;
            color: #856404;
        }
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” æ•°æ®çœŸå®æ€§æµ‹è¯•å·¥å…·</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š å½“å‰æ•°æ®çŠ¶æ€</h2>
        <div class="button-group">
            <button class="btn-info" onclick="checkAllData()">æ£€æŸ¥æ‰€æœ‰æ•°æ®</button>
            <button class="btn-primary" onclick="viewDashboard()">æŸ¥çœ‹ä»ªè¡¨æ¿</button>
            <button class="btn-danger" onclick="clearAllData()">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
        </div>
        <div id="data-status"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª ç”Ÿæˆæµ‹è¯•æ•°æ®</h2>
        <div class="info-box">
            <strong>æç¤ºï¼š</strong>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼Œç„¶ååˆ·æ–°ä»ªè¡¨æ¿æŸ¥çœ‹æ•ˆæœ
        </div>
        <div class="button-group">
            <button class="btn-success" onclick="generateCheckinData()">ç”Ÿæˆæ‰“å¡æ•°æ®ï¼ˆ7å¤©ï¼‰</button>
            <button class="btn-success" onclick="generateStudyPlan()">ç”Ÿæˆå­¦ä¹ è®¡åˆ’</button>
            <button class="btn-success" onclick="generateProgress()">ç”Ÿæˆå­¦ä¹ è¿›åº¦</button>
            <button class="btn-primary" onclick="generateAllData()">ä¸€é”®ç”Ÿæˆå…¨éƒ¨æ•°æ®</button>
        </div>
        <div id="generate-result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“ æŸ¥çœ‹åŸå§‹æ•°æ®</h2>
        <div class="button-group">
            <button class="btn-info" onclick="viewCheckinData()">æŸ¥çœ‹æ‰“å¡è®°å½•</button>
            <button class="btn-info" onclick="viewStudyPlans()">æŸ¥çœ‹å­¦ä¹ è®¡åˆ’</button>
            <button class="btn-info" onclick="viewProgress()">æŸ¥çœ‹å­¦ä¹ è¿›åº¦</button>
        </div>
        <div class="data-display" id="raw-data"></div>
    </div>

    <script>
        // æ£€æŸ¥æ‰€æœ‰æ•°æ®
        function checkAllData() {
            const checkin = localStorage.getItem('tust-acm-checkin-records');
            const plans = localStorage.getItem('tust-acm-study-plans');
            const progress = localStorage.getItem('tust-acm-learning-progress');
            
            let html = '<div style="line-height: 2;">';
            html += `<div>ğŸ“… æ‰“å¡è®°å½•: ${getStatus(checkin)}</div>`;
            html += `<div>ğŸ“š å­¦ä¹ è®¡åˆ’: ${getStatus(plans)}</div>`;
            html += `<div>ğŸ“Š å­¦ä¹ è¿›åº¦: ${getStatus(progress)}</div>`;
            html += '</div>';
            
            if (!checkin && !plans && !progress) {
                html += '<div class="info-box" style="margin-top: 20px;">å½“å‰æ²¡æœ‰ä»»ä½•æ•°æ®ã€‚ç‚¹å‡»"ç”Ÿæˆæµ‹è¯•æ•°æ®"æŒ‰é’®åˆ›å»ºæµ‹è¯•æ•°æ®ã€‚</div>';
            } else {
                html += '<div class="success-box" style="margin-top: 20px;">âœ… æ•°æ®å·²å­˜åœ¨ï¼æ‰€æœ‰å›¾è¡¨éƒ½ä¼šä½¿ç”¨è¿™äº›çœŸå®æ•°æ®ã€‚</div>';
            }
            
            document.getElementById('data-status').innerHTML = html;
        }
        
        function getStatus(data) {
            if (!data) {
                return '<span class="status empty">æ— æ•°æ®</span>';
            }
            try {
                const parsed = JSON.parse(data);
                const size = JSON.stringify(parsed).length;
                return `<span class="status real">âœ… çœŸå®æ•°æ® (${size} å­—èŠ‚)</span>`;
            } catch (e) {
                return '<span class="status fake">âŒ æ•°æ®æŸå</span>';
            }
        }
        
        // ç”Ÿæˆæ‰“å¡æ•°æ®
        function generateCheckinData() {
            const checkinRecords = {
                checkins: [],
                streak: 7,
                totalDays: 7,
                lastCheckin: new Date().toISOString().split('T')[0]
            };
            
            for (let i = 0; i < 7; i++) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                checkinRecords.checkins.push(date.toISOString().split('T')[0]);
            }
            
            localStorage.setItem('tust-acm-checkin-records', JSON.stringify(checkinRecords));
            showResult('âœ… æ‰“å¡æ•°æ®å·²ç”Ÿæˆï¼åŒ…å«æœ€è¿‘7å¤©çš„æ‰“å¡è®°å½•ã€‚');
            checkAllData();
        }
        
        // ç”Ÿæˆå­¦ä¹ è®¡åˆ’
        function generateStudyPlan() {
            const plans = {
                algorithm: {
                    pathId: 'algorithm',
                    pathName: 'ç®—æ³•ç«èµ›',
                    weeklyHours: 15,
                    targetDate: new Date(Date.now() + 180 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    level: 'intermediate',
                    goal: 'interest',
                    phases: [{}, {}, {}, {}],
                    milestones: [],
                    estimatedCompletion: {
                        months: 9,
                        date: new Date(Date.now() + 270 * 24 * 60 * 60 * 1000).toLocaleDateString('zh-CN'),
                        totalHours: 540
                    },
                    weeklySchedule: {
                        totalHours: 15,
                        daysPerWeek: 5,
                        hoursPerDay: 3,
                        breakdown: {
                            theory: 4.5,
                            practice: 7.5,
                            review: 3
                        }
                    },
                    tips: ['æ¯å¤©è‡³å°‘åš2-3é“é¢˜', 'å‚åŠ å‘¨èµ›ä¿æŒæ‰‹æ„Ÿ', 'å»ºç«‹é”™é¢˜æœ¬']
                },
                python: {
                    pathId: 'python',
                    pathName: 'Pythonå¼€å‘',
                    weeklyHours: 12,
                    targetDate: new Date(Date.now() + 120 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    level: 'beginner',
                    goal: 'job',
                    phases: [{}, {}, {}],
                    milestones: [],
                    estimatedCompletion: {
                        months: 5,
                        date: new Date(Date.now() + 150 * 24 * 60 * 60 * 1000).toLocaleDateString('zh-CN'),
                        totalHours: 240
                    },
                    weeklySchedule: {
                        totalHours: 12,
                        daysPerWeek: 4,
                        hoursPerDay: 3,
                        breakdown: {
                            theory: 3.6,
                            practice: 6,
                            review: 2.4
                        }
                    },
                    tips: ['å¤šåšå°é¡¹ç›®ç»ƒä¹ ', 'å­¦ä¹ å¸¸ç”¨åº“', 'æ³¨é‡ä»£ç è§„èŒƒ']
                }
            };
            
            localStorage.setItem('tust-acm-study-plans', JSON.stringify(plans));
            showResult('âœ… å­¦ä¹ è®¡åˆ’å·²ç”Ÿæˆï¼åŒ…å«ç®—æ³•ç«èµ›å’ŒPythonå¼€å‘ä¸¤ä¸ªè®¡åˆ’ã€‚');
            checkAllData();
        }
        
        // ç”Ÿæˆå­¦ä¹ è¿›åº¦
        function generateProgress() {
            const progress = {
                paths: {
                    algorithm: {
                        completedTopics: ['topic1', 'topic2', 'topic3', 'topic4', 'topic5', 'topic6', 'topic7', 'topic8', 'topic9', 'topic10'],
                        startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
                        lastActivity: new Date().toISOString()
                    },
                    python: {
                        completedTopics: ['topic1', 'topic2', 'topic3', 'topic4', 'topic5', 'topic6', 'topic7', 'topic8'],
                        startDate: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
                        lastActivity: new Date().toISOString()
                    },
                    frontend: {
                        completedTopics: ['topic1', 'topic2', 'topic3', 'topic4', 'topic5'],
                        startDate: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),
                        lastActivity: new Date().toISOString()
                    }
                },
                achievements: ['first-step', 'quarter', 'halfway'],
                startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
                totalStudyTime: 0
            };
            
            localStorage.setItem('tust-acm-learning-progress', JSON.stringify(progress));
            showResult('âœ… å­¦ä¹ è¿›åº¦å·²ç”Ÿæˆï¼åŒ…å«3ä¸ªå­¦ä¹ è·¯å¾„çš„è¿›åº¦æ•°æ®ã€‚');
            checkAllData();
        }
        
        // ä¸€é”®ç”Ÿæˆå…¨éƒ¨æ•°æ®
        function generateAllData() {
            generateCheckinData();
            generateStudyPlan();
            generateProgress();
            showResult('ğŸ‰ æ‰€æœ‰æµ‹è¯•æ•°æ®å·²ç”Ÿæˆï¼ç°åœ¨å¯ä»¥æŸ¥çœ‹ä»ªè¡¨æ¿äº†ã€‚', true);
        }
        
        // æŸ¥çœ‹åŸå§‹æ•°æ®
        function viewCheckinData() {
            const data = localStorage.getItem('tust-acm-checkin-records');
            displayRawData('æ‰“å¡è®°å½•', data);
        }
        
        function viewStudyPlans() {
            const data = localStorage.getItem('tust-acm-study-plans');
            displayRawData('å­¦ä¹ è®¡åˆ’', data);
        }
        
        function viewProgress() {
            const data = localStorage.getItem('tust-acm-learning-progress');
            displayRawData('å­¦ä¹ è¿›åº¦', data);
        }
        
        function displayRawData(title, data) {
            const container = document.getElementById('raw-data');
            if (!data) {
                container.innerHTML = `<p style="color: #8898aa;">æš‚æ— ${title}æ•°æ®</p>`;
                return;
            }
            
            try {
                const parsed = JSON.parse(data);
                container.innerHTML = `<h4>${title}</h4><pre>${JSON.stringify(parsed, null, 2)}</pre>`;
            } catch (e) {
                container.innerHTML = `<p style="color: #f5365c;">æ•°æ®è§£æå¤±è´¥: ${e.message}</p>`;
            }
        }
        
        // æ¸…é™¤æ‰€æœ‰æ•°æ®
        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem('tust-acm-checkin-records');
                localStorage.removeItem('tust-acm-study-plans');
                localStorage.removeItem('tust-acm-learning-progress');
                showResult('âœ… æ‰€æœ‰æ•°æ®å·²æ¸…é™¤ï¼');
                checkAllData();
                document.getElementById('raw-data').innerHTML = '';
            }
        }
        
        // æŸ¥çœ‹ä»ªè¡¨æ¿
        function viewDashboard() {
            window.open('src/my-dashboard.html', '_blank');
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult(message, isSuccess = false) {
            const container = document.getElementById('generate-result');
            const className = isSuccess ? 'success-box' : 'info-box';
            container.innerHTML = `<div class="${className}">${message}</div>`;
            
            if (isSuccess) {
                setTimeout(() => {
                    container.innerHTML += '<div class="info-box" style="margin-top: 10px;">ğŸ’¡ ç‚¹å‡»"æŸ¥çœ‹ä»ªè¡¨æ¿"æŒ‰é’®ï¼Œæˆ–ç›´æ¥è®¿é—® <a href="src/my-dashboard.html" target="_blank">my-dashboard.html</a></div>';
                }, 500);
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æ•°æ®
        window.onload = function() {
            checkAllData();
        };
    </script>
</body>
</html>
